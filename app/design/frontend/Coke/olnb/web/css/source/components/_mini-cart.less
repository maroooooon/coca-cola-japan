
.mini-cart {
  * {
    outline: none;

    &:focus-visible {
      outline: initial;
    }
  }

  .stripe-payments-express-minicart {
    margin: 0 !important
  }

  .icon-wrap {
    position: relative;

    .qty {
      position: absolute;
      bottom: -0.4rem;
      right: -0.6rem;
      display: flex;
      justify-content: center;
      align-items: center;
      background: @color-brand-primary;
      width: 15px;
      height: 15px;
      text-align: center;
      border-radius: 9999em;

      .counter-number {
        font-size: 0.9rem;
        color: #fff;
        font-weight: @font-weight-500;
        line-height: 1;
        margin-top: 1px; // aligns better
      }
    }
  }

  .block-minicart {
    position: absolute;
    z-index: 99;
    right: 0;
    top: 80%;
    width: 360px;
  }
}

#minicart-content-wrapper {
  @_pad: @grid-gutter;

  text-align: left;
  background: #fff;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
  border-radius: @border-radius-base;

  #btn-minicart-close {
    display: none !important
  }

  .block-title {
    background: @color-grey100;
    padding: (@_pad - 0.75rem) @_pad;
    display: flex;
    align-items: center;

    strong {
      .__type-reset();
      flex: 1;

      .qty {
        display: none;
      }
    }
  }

  .block-content {
    padding: 0;
  }

  .subtitle.empty {
    .__type-reset(@fontSize: @size-text-sm);
    padding: @_pad;
    display: block;
  }

  .totals-row {
    background: @color-grey100;
    padding: (@_pad - 0.75rem) @_pad;

    .items-total {
      display: none;
    }

    .subtotal {
      display: flex;
      align-items: center;

      .label {
        flex: 1;
        margin: 0 2rem 0 0;
        color: @color-header;
      }

      .amount {
        font-weight: @font-weight-500;
      }
    }
  }

  .button-actions {
    padding: 1rem @_pad @_pad;

    .viewcart {
      text-align: center;
      // margin-bottom: 1rem;

      a {
        margin: 0;
      }
    }

    a {
      .__type-reset();
      ._link-black-underlined();
      margin-right: 1rem;
      font-weight: @font-weight-400;
      font-size: @size-text-sm;
    }

    button {
      width: 100%;
    }
  }

  .minicart-items-wrapper {
    height: auto !important;
  }

  .minicart-items > {
    > li {
      > .product {
        padding: @_pad 0;
        margin: 0 @_pad;
        border-bottom: 1px solid @color-border;
      }

      &:last-child {
        > .product {
          border-bottom: 0;
        }
      }
    }
  }
}

.minicart-items {
  padding: 0;
  margin: 0;
  max-height: 380px;
  overflow: auto;

  > li > .product {
    display: flex;
    align-items: flex-start;

    .product-item-photo {
      margin-right: 2rem;
    }

    .product-item-details {
      flex: 1;
    }

    .top-row-wrap {
      display: flex;
      align-items: flex-start;

      > * {
        &:first-child {
          flex: 1;
          margin-right: 2rem;
        }
      }
    }

    .price {
      font-size: @size-text-sm;
      font-weight: @font-weight-500;
    }
  }

  .product-item-photo {
    span {
      display: block;
      padding: 0 !important;
      width: auto !important;

      img {
        width: 100% !important;
        max-width: 60px !important;
        height: auto !important;
      }
    }
  }

  .product-item-name {
    font-size: @size-text-sm;
    display: block;

    a {
      ._link-black();
    }
  }

  .item-options {
    margin-top: 0.5rem;

    span {
      font-size: @size-text-xs;
    }
  }

  .actions {
    display: flex;
    align-items: center;
    margin-top: 0.75rem;
  }

  .details-qty {
    display: flex;
    flex: 1;

    .label {
      display: none;
    }

    input,
    button {
      height: @height-sm
    }

    input {
      width: auto;
      max-width: 56px;
    }

    .update-cart-item {
      ._btn-link();
      ._link-primary();
      font-size: @size-text-sm;
    }
  }

  .item-actions {
    a {
      ._link-light-grey-to-black();
      font-size: @size-h5;
      margin-left: 1.5rem;

      i {
        line-height: 0;
      }
    }
  }
}
